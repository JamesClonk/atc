---
resource_types:
- name: custom-type-with-nested-params
  type: git
  source:
    branch: master
    git_config:
    - name: core.bigFileThreshold
      value: 10m
      uri: git://10.254.0.78:9418/some-repo

resources:
- name: git-repo
  type: git
  source:
    branch: master
    git_config:
    - name: core.bigFileThreshold
      value: 10m
      uri: git://10.254.0.78:9418/some-repo

- name: resource-with-custom-type
  type: custom-type-with-nested-params
  source: {}

jobs:
- name: config-test
  plan:
  - aggregate:
    - get: resource-with-custom-type
    - task: test-nested-params
      config:
        platform: linux
        image_resource:
          type: git
          source:
            branch: master
            git_config:
            - name: core.bigFileThreshold
              value: 10m
              uri: git://10.254.0.78:9418/some-repo
              run:
                path: echo
                args:
                - "123"
                dir: ""
    - get: git-repo
      trigger: true
